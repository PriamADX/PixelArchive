<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>PixelArchive</title>

  <style>
    body {
      background: #0f0f0f;
      color: white;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #00ffcc;
    }

    input {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-bottom: 20px;
      border-radius: 8px;
      border: none;
    }

    .file {
      background: #1c1c1c;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    .file h3 {
      margin: 0;
      color: #00ffcc;
    }

    .file p {
      margin: 5px 0;
      color: #aaa;
    }

    .file a {
      display: inline-block;
      margin-top: 5px;
      color: white;
      background: #00ffcc;
      padding: 6px 10px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
    }

    .file a:hover {
      background: #00cca3;
    }
  </style>
</head>

<body>

  <h1>üì¶ PixelArchive</h1>

  <input id="search" placeholder="üîç Rechercher un fichier..." />

  <div id="files"></div>

  <script>
    const SHEET_URL =
      "https://docs.google.com/spreadsheets/d/1LyUjqpyXucK97PMsuQH5wjU7PQj-LWZYunfuN1Pl5NM/export?format=csv";

    let fichiers = [];

    fetch(SHEET_URL)
      .then(res => res.text())
      .then(text => {
        const lignes = text.split("\n").slice(1);

        lignes.forEach(ligne => {
          const cols = ligne.split(",");
          if (cols.length < 3) return;

          const titre = cols[0];
          const lien = cols[1];
          const type = cols[2];

          const match = lien.match(/\/d\/([^/]+)/);
          if (!match) return;

          const id = match[1];
          const download =
            "https://drive.google.com/uc?export=download&id=" + id;

          fichiers.push({ titre, type, download });
        });

        afficher(fichiers);
      });

    function afficher(liste) {
      const zone = document.getElementById("files");
      zone.innerHTML = "";

      liste.forEach(f => {
        zone.innerHTML += `
          <div class="file">
            <h3>${f.titre}</h3>
            <p>Type : ${f.type}</p>
            <a href="${f.download}" target="_blank">‚¨áÔ∏è T√©l√©charger</a>
          </div>
        `;
      });
    }

    document.getElementById("search").addEventListener("input", e => {
      const q = e.target.value.toLowerCase();
      const filtre = fichiers.filter(f =>
        f.titre.toLowerCase().includes(q)
      );
      afficher(filtre);
    });
  </script>

</body>
</html>
